if (
    typeof window['OptiMonk'] !== "object"
    || typeof window['OptiMonk']['preloadInitialized'] !== "boolean"
) {
    window.OptiMonk = {};
    OptiMonk.isSPA = false;

    

    window.OptiMonkRegistry = {
        account: 114695,
        jfJsScriptUrl: 'https://gs-cdn.optimonk.com/jfclientsdk/latest/jfclientsdk.min.js?ts=11',
        pncJsScriptUrl: '//storage.googleapis.com/om-pnc-builds/main.js',
        baseUrl: document.location.protocol + '//front.optimonk.com',
        contentUrl: document.location.protocol + '//cdn-content.optimonk.com',
        beUrl: 'https://backend.optimonk.com',
        assetsVersion: '213',
        activatedCampaigns: {"popup": false, "sidebar": false, "nanobar": false, "embedded": false},
        queuedCampaigns: {"popup": false, "sidebar": false, "nanobar": false, "embedded": false},
        mobileExitCampaigns: [],
        externalValidators: {},
        uuid: (function () {
            function s4() {return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)}
            return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4()
        })(),
        needSiteInfo: false,
        shouldStoreClientCookie: false,
        needClientId: true,
        reportLvp: true,
        experiment: null,
        jfIDBStoreEnabled: true,
        assetsPath: 'https://cdn-dynamic.optimonk.com/'
    };
    /* Namespace */
    function ns(n){for(var i=n.split("."),o=window,r="",t=0,d=i.length;t<d;t++)o[r=i[t]]=void 0===o[r]?{}:o[r],o=o[r];return o}

    !function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}OptiMonk.ayepromise=function(){var e={},t=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},o=function(e){var t=e&&e.then;return"object"==typeof e&&"function"==typeof t?function(){return t.apply(e,arguments)}:void 0},n=function(t,o){var n=e.defer(),r=function(e,t){setTimeout((function(){var o;try{o=e(t)}catch(e){return void n.reject(e)}o===n.promise?n.reject(new TypeError("Cannot resolve promise with itself")):n.resolve(o)}),1)},s=function(e){t&&t.call?r(t,e):n.resolve(e)},c=function(e){o&&o.call?r(o,e):n.reject(e)};return{promise:n.promise,handle:function(e,t){e===i?s(t):c(t)}}},r=0,i=1,s=2;return e.defer=function(){var e,c=r,a=[],l=function(t,o){c=t,e=o,a.forEach((function(t){t.handle(c,e)})),a=null},u=function(e){l(i,e)},d=function(e){l(s,e)},p=function(t,o){var i=n(t,o);return c===r?a.push(i):i.handle(c,e),i.promise},f=function(e){var o=t();try{e(o(h),o(d))}catch(e){o(d)(e)}},h=function(e){var t;try{t=o(e)}catch(e){return void d(e)}t?f(t):u(e)},m=t();return{resolve:m(h),reject:m(d),promise:{then:p,fail:function(e){return p(null,e)}}}},e}();const t=window.OptiMonk||{},o=function(){return"object"==typeof window.console&&"function"==typeof window.console.error&&"function"==typeof window.console.log&&"function"==typeof window.console.info},n={log(e){!1!==o()&&window.console.log(e)},error(e,t){!1!==o()&&(t=t||{},window.console.error(e,t))},info(e){!1!==o()&&window.console.info(e)}},r={load:function(e){var t,o,n;if("undefined"!=typeof XMLHttpRequest)"withCredential"in(t=new XMLHttpRequest)&&(t.withCredentials=!0);else{var r=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];for(o=0,n=r.length;n>o;o++)try{t=new ActiveXObject(r[o]);break}catch(e){}}return t.onreadystatechange=function(){4===t.readyState&&e&&e(t.responseText)},t},get:function(e,t){var o=r.load(t);o.open("GET",e,!0),o.send("")},post:function(e,t,o){var n=r.load(o);n.open("POST",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(e)}},i={},s=`${OptiMonkRegistry.baseUrl}/error/log`;function c(e){r.post(`message=${encodeURIComponent(JSON.stringify(e))}`,s)}function a(e){return!!i[e.message]}function l(e){i[e.message]=1}const u={sendException(e){if(a(e))return;l(e);c(function(e){return{message:e.message,stack:e.stack,userAgent:navigator.userAgent,url:window.location.href,name:e.name,line:e.lineNumber||e.number}}(e))},sendEventError(e){if(a(e))return;l(e);var t;c({message:(t=e).message,stack:t.error?t.error.stack:"",userAgent:navigator.userAgent,url:window.location.href,errorEvent:t,file:t.filename})}},d=function(e,t,o){return JSON.stringify(e,t,o)},p=function(e,t){return JSON.parse(e,t)},f=function(e,t){if("string"!=typeof e)return decodeURIComponent(e);var o,n,r,i="",s=0;for(void 0===t&&(t=0),n=(o=e.split(/(%(?:d0|d1)%.{2})/)).length;s<n;s++){try{r=decodeURIComponent(o[s])}catch(e){r=t?o[s].replace(/%(?!\d+)/g,"%25"):o[s]}i+=r}return i},h=function(e,t){return"object"!=typeof t?f(t):t},m=window.setInterval;function g(e,t){const o=m(e,t);return OptiMonkRegistry.intervals=OptiMonkRegistry.intervals||[],OptiMonkRegistry.intervals.push(o),o}const w=window.setTimeout;function y(e,t){const o=w(e,t);return OptiMonkRegistry.timeouts=OptiMonkRegistry.timeouts||[],OptiMonkRegistry.timeouts.push(o),o}function v(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const n=t[0];t.splice(0,1);const r=t;for(let e=0;e<r.length;e+=1){const o=t[e];if(null!=o){const e=Object.keys(Object(o));for(let t=0,r=e.length;t<r;t+=1){const r=e[t],i=Object.getOwnPropertyDescriptor(o,r);void 0!==i&&i.enumerable&&(n[r]?Object.assign(n[r],o[r]):n[r]=o[r])}}}return n}var I=Object.freeze({__proto__:null,stringify:d,parse:p,decodeURIComponentSafe:f,parseHelper:h,trim:function(e){return null===e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},setInterval:g,setTimeout:y,checkVariable:function(e,o,n){let r=0,i=t.ayepromise.defer(),s=g((function(){void 0!==window[e]&&(i.resolve(window[e]),clearInterval(s)),r++,r===o&&(clearInterval(s),i.reject(!1))}),n=n||10);return i.promise},assign:function(e,t){let o=Object(e);for(let e=1;e<arguments.length;e++){let t=arguments[e];if(null!=t)for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])}return o},debounce:function(e,t,o){var n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var c=this,a=function(){n=null,o||e.apply(c,i)},l=o&&!n;clearTimeout(n),n=y(a,t),l&&e.apply(c,i)}},serializeObject:function(e){let t=[];return Object.keys(e).forEach((function(o){Array.isArray(e[o])?e[o].forEach((function(e){t.push(encodeURIComponent(o)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))})),t.join("&")},isElementVisible:function(e){let o=!0;const{width:n}=t.elementSize(window),r=[".om-element",".canv-col",".canv-row"];for(const t of r){const r=e.closest(t);if(r&&(r.classList.contains("xs-hidden")&&n<=576||r.classList.contains("xs-up-hidden")&&n>576)){o=!1;break}}return o},merge:v});const S=function(e){return"object"==typeof e&&(e=d(e)),navigator.userAgent.match(/^Opera.* Version\/12.*/)?encodeURIComponent(e):e},k={getItem(e){const t=document.cookie.match(new RegExp(`${e}=([^;]+)`));return t?decodeURIComponent(t[1]):null},getItemSlices(e,t){const o=new RegExp(`${e}_${OptiMonkRegistry.account}_[0-9]+=([^;]+)\\;?`,"gm");let n,r=[];for(;n=o.exec(document.cookie);){const e="function"==typeof t?t(n[1]):n[1];r=r.concat(JSON.parse(decodeURIComponent(e)))}return r},getItemSlicesRaw(e){const t=new RegExp(`(${e}_${OptiMonkRegistry.account}_[0-9]+)=([^;]+)\\;?`,"gm"),o=[];let n;for(;n=t.exec(document.cookie);)o.push({key:n[1],value:n[2]});return o},removeItem:e=>!!k.hasItem(e)&&(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;`,!0),hasItem:e=>!!e&&new RegExp(`(?:^|;\\s*)${encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")}\\s*\\=`).test(document.cookie),setItem(e,t){const o=new Date;let n=S(t);o.setUTCFullYear(o.getUTCFullYear()+1),n+=`; expires=${o.toUTCString()}`,document.cookie=`${e}=${n};path=/;`}},O={setItem(e,t){const o=S(t);document.cookie=`${e}=${o};path=/;`},getItem:e=>k.getItem(e),getItemSlices:e=>k.getItemSlices(e),hasItem:e=>k.hasItem(e),removeItem:e=>k.removeItem(e)},R={},M={local:k,session:O,CampaignCookieCollection:{add(e){R[e.getCampaignId()]=e},getByCampaignId:e=>R[e],getAllAsArray:()=>Object.keys(R).map((e=>R[e]))}};let b=M.local.setItem,C=M.local.getItem,A=M.local.getItemSlices,E=M.local.removeItem,$=M.local.hasItem,x=M.session.setItem,T=M.session.getItem,j=M.session.getItemSlices,_=M.session.removeItem,L=M.session.hasItem;"object"==typeof localStorage&&(b=function(e,t){localStorage.setItem(e,d(t))},C=function(e){return p(localStorage.getItem(e),h)},A=function(e){return p(localStorage.getItemSlices(e),h)},E=function(e){return localStorage.removeItem(e),!0},$=function(e){return null!==C(e)},x=function(e,t){sessionStorage.setItem(e,d(t))},T=function(e){return p(sessionStorage.getItem(e),h)},j=function(e){return p(sessionStorage.getItemSlices(e),h)},_=function(e){return sessionStorage.removeItem(e),!0},L=function(e){return null!==T(e)});const P={local:{getItem:e=>C(e),setItem(e,t){b(e,t)},getItemSlices:e=>A(e),removeItem:e=>E(e),hasItem:e=>$(e)},session:{getItem:e=>T(e),setItem(e,t){x(e,t)},getItemSlices:e=>j(e),removeItem:e=>_(e),hasItem:e=>L(e)}},D={load(){const e=t.ayepromise.defer();return this.Loader.load(e),e.promise},Loader:{load(e){e.resolve()}}};class q{constructor(){this.type="custom",this._cookieNames=[]}getShopId(){return null}hasCookie(){let e=!1;for(let t=0;t<this._cookieNames.length;++t){if(M.local.getItem(this._cookieNames[t])){e=!0;break}}return e}}class F extends q{constructor(){super(...arguments),this.type="shopify"}check(){return!!window.Shopify||!!window.ShopifyAnalytics}getShopId(){return window.Shopify&&window.Shopify.shop||null}}class U extends q{constructor(){super(...arguments),this.type="bigcommerce",this._cookieNames=["bc_attribution","bc_visitor"]}check(){const e=window.BCData;return!!e&&!!e.csrf_token||this.hasCookie()}}class J extends q{constructor(){super(...arguments),this.type="magento",this._cookieNames=["mage-banners-cache-storage","mage-cache-sessid","mage-cache-storage","mage-cache-storage-section-invalidation","mage-messages"]}hasTags(){return!!(document.querySelectorAll('[href*="Magento"]')||[]).length}hasTpl(){const e=window.checkout;if(e){const t=e.imageTemplate;return!!t&&"string"==typeof t&&/magento/gi.test(t)}return!1}check(){return this.hasTags()||this.hasTpl()||this.hasCookie()||!!window.Mage}}class N extends q{constructor(){super(...arguments),this.type="prestashop"}check(){return!!window.prestashop}}class H extends q{constructor(){super(...arguments),this.type="woocommerce"}check(){let e=!1;const t=document.querySelector("body");return t&&(e=t.classList.contains("woocommerce")),!!window.woocommerce_params||e}}class V extends q{constructor(){super(...arguments),this.type="shoprenter"}check(){return!!window.ShopRenter}getShopId(){return window.ShopRenter&&window.ShopRenter.shop&&window.ShopRenter.shop.name||null}}class X extends q{constructor(){super(...arguments),this.type="salesforce-commerce"}check(){const e=Array.from(document.querySelectorAll("link"));for(let t=0;t<e.length;t+=1){const o=e[t];if(o.href){if(o.href.indexOf("demandware")>-1)return!0}}return!1}}class z extends q{constructor(){super(...arguments),this.type="unas"}check(){return!!window.unas_shop_url}}class B extends q{constructor(){super(...arguments),this.type="wordpress"}check(){const e=Array.from(document.querySelectorAll("link"));for(let t=0;t<e.length;t+=1){const o=e[t];if(o.href){const e=o.href.indexOf("/wp-content/")>-1,t=o.href.indexOf("/wp-includes/")>-1;if(e||t)return!0}}return!1}}class K extends q{constructor(){super(...arguments),this.type="drupal"}check(){return!!window.Drupal}}let W=!1;const G=[];function Y(){if(!W)try{G.push(new F),G.push(new U),G.push(new J),G.push(new N),G.push(new H),G.push(new V),G.push(new X),G.push(new z),G.push(new B),G.push(new K),W=!0}catch(e){console.error("[Engine] Error occurred when instantiating detectors",e)}}function Q(){W||Y();for(let e=0;e<G.length;e+=1){const t=G[e];if(t.check())return{type:t.type,shopId:t.getShopId()}}return{type:"custom",shopId:null}}const Z={initialize:Y,getInfo:Q,getType:function(){const{type:e}=Q();return e},Abstract:q,Shopify:F,BigCommerce:U,Magento:J,Prestashop:N,WooCommerce:H,Shoprenter:V,SalesforceCommerce:X,Unas:z,WordPress:B,Drupal:K};let ee=!1;const te={initialize(){ee||(Z.initialize(),ee=!0)},collect(){const e=Z.getInfo();return{account:OptiMonkRegistry.account,platform:e.type,shopId:e.shopId,hostname:location.hostname}},send(){if(!ee)throw new Error("[SiteInfo] Not initialized");const e=te.collect();(function(){const e=new t.native.XMLHttpRequest;return e.open("POST",`${OptiMonkRegistry.baseUrl}/analytics/siteinfo`,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e})().send(`data=${JSON.stringify(e)}`)}};var oe,ne,re,ie=1;const se={postMessage:function(e,t,o){t&&(o=o||parent,window.postMessage?o.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(o.location=t.replace(/#.*$/,"")+"#"+ +new Date+ie+++"&"+e))},receiveMessage:function(e,t){window.postMessage?(e&&(re=function(o){if("string"==typeof t&&o.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(o.origin))return!1;e(o)}),window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",re,!1):window[e?"attachEvent":"detachEvent"]("onmessage",re)):(oe&&clearInterval(oe),oe=null,e&&(oe=setInterval((function(){var t=document.location.hash,o=/^#?\d+&/;t!==ne&&o.test(t)&&(ne=t,e({data:t.replace(o,"")}))}),100)))}},ce=e({},I);var ae=String.fromCharCode,le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ue={};const de={compressToBase64:function(e){if(null==e)return"";var t=de._compress(e,6,(function(e){return le.charAt(e)}));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:de._decompress(e.length,32,(function(t){return function(e,t){if(!ue[e]){ue[e]={};for(var o=0;o<e.length;o++)ue[e][e.charAt(o)]=o}return ue[e][t]}(le,e.charAt(t))}))},_compress:function(e,t,o){if(null==e)return"";var n,r,i,s={},c={},a="",l="",u="",d=2,p=3,f=2,h=[],m=0,g=0;for(i=0;i<e.length;i+=1)if(a=e.charAt(i),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=p++,c[a]=!0),l=u+a,Object.prototype.hasOwnProperty.call(s,l))u=l;else{if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)m<<=1,g==t-1?(g=0,h.push(o(m)),m=0):g++;for(r=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1}else{for(r=1,n=0;n<f;n++)m=m<<1|r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r=0;for(r=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete c[u]}else for(r=s[u],n=0;n<f;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1;0==--d&&(d=Math.pow(2,f),f++),s[l]=p++,u=String(a)}if(""!==u){if(Object.prototype.hasOwnProperty.call(c,u)){if(u.charCodeAt(0)<256){for(n=0;n<f;n++)m<<=1,g==t-1?(g=0,h.push(o(m)),m=0):g++;for(r=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1}else{for(r=1,n=0;n<f;n++)m=m<<1|r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r=0;for(r=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1}0==--d&&(d=Math.pow(2,f),f++),delete c[u]}else for(r=s[u],n=0;n<f;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1;0==--d&&(d=Math.pow(2,f),f++)}for(r=2,n=0;n<f;n++)m=m<<1|1&r,g==t-1?(g=0,h.push(o(m)),m=0):g++,r>>=1;for(;;){if(m<<=1,g==t-1){h.push(o(m));break}g++}return h.join("")},_decompress:function(e,t,o){var n,r,i,s,c,a,l,u=[],d=4,p=4,f=3,h="",m=[],g={val:o(0),position:t,index:1};for(n=0;n<3;n+=1)u[n]=n;for(i=0,c=Math.pow(2,2),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;l=ae(i);break;case 1:for(i=0,c=Math.pow(2,16),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;l=ae(i);break;case 2:return""}for(u[3]=l,r=l,m.push(l);;){if(g.index>e)return"";for(i=0,c=Math.pow(2,f),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;switch(l=i){case 0:for(i=0,c=Math.pow(2,8),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;u[p++]=ae(i),l=p-1,d--;break;case 1:for(i=0,c=Math.pow(2,16),a=1;a!=c;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=o(g.index++)),i|=(s>0?1:0)*a,a<<=1;u[p++]=ae(i),l=p-1,d--;break;case 2:return m.join("")}if(0==d&&(d=Math.pow(2,f),f++),u[l])h=u[l];else{if(l!==p)return null;h=r+r.charAt(0)}m.push(h),u[p++]=r+h.charAt(0),r=h,0==--d&&(d=Math.pow(2,f),f++)}}},pe={XMLHttpRequest:window.XMLHttpRequest,fetch:window.fetch,Promise:window.Promise,Date:window.Date};try{const e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e);const t=e.contentWindow;t&&(pe.XMLHttpRequest=t.XMLHttpRequest,pe.fetch=function(){return t.fetch(...arguments)},pe.Promise=t.Promise,pe.Date=t.Date)}catch(e){}const fe={isApple:/Apple\ Computer/.test(navigator.vendor)},he={isSafari:/Safari/.test(navigator.userAgent)&&fe.isApple,isIE:window.navigator.userAgent.indexOf("MSIE ")>0||!!window.navigator.userAgent.match(/Trident.*rv\:11\./),isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isChrome:navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&navigator.vendor.indexOf("Google Inc")>-1&&-1===navigator.userAgent.indexOf("OPR")&&-1===navigator.userAgent.indexOf("SamsungBrowser")&&-1===navigator.userAgent.toLowerCase().indexOf("miui")},me={isIphone:/iPhone/.test(navigator.platform),isIpad:/iPad/.test(navigator.platform),isIpod:/iPod/.test(navigator.platform)};var ge=Object.freeze({__proto__:null,vendor:fe,browser:he,platform:me});const we=[],ye=function(e,t,o){e.addEventListener?(e.addEventListener(t,o,!1),we.push({obj:e,type:t,fn:o})):e.attachEvent?(e.attachEvent(`on${t}`,(function(){o.apply(e,new Array(window.event))})),we.push({obj:e,type:t,fn:o})):(e[`on${t}`]=o,we.push({obj:e,type:t,fn:o}))},ve=function(e,t,o){e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent?e.detachEvent(`on${t}`,o):e[`on${t}`]&&delete e[`on${t}`]};var Ie=Object.freeze({__proto__:null,addedListeners:we,addListener:ye,removeListener:ve,removeAllListeners:function(){for(let e=0;e<we.length;++e){const t=we[e];ve(t.obj,t.type,t.fn)}we.splice(0,we.length)}});const Se=function(){let e=M.local.getItem("optiMonkClient")||"{}",t=-1===e.indexOf("{");if(e=p(t?de.decompressFromBase64(e):e),!e[OptiMonkRegistry.account])return Object.keys(e).forEach((function(t){let o=-1===["133806","44"].indexOf(t);try{const n=((new Date).getTime()/1e3-new Date(e[t].lv).getTime()||null)/86400;o=o&&n>30}catch(e){console.error("[OM] Multi account cookie deletion error",e)}o&&(delete e[t],console.log("delete account cookie",t))})),e[OptiMonkRegistry.account]={},e;if(Array.isArray(e[OptiMonkRegistry.account].ca)){const o=M.local.getItemSlicesRaw("optiMonkClient"),n=e[OptiMonkRegistry.account].ca;for(let e=0,r=o.length;e<r;e+=1){const r=o[e];t=-1===r.value.indexOf("{");let i=r.value;t&&(i=de.decompressFromBase64(i)),Array.prototype.push.apply(n,JSON.parse(decodeURIComponent(i)))}const r={};return n.forEach((function(e){const t=e.caId;delete e.caId,r[t]=e})),e[OptiMonkRegistry.account].ca=r,e}return e},ke=function(){const e={},t=document.cookie.match(new RegExp("omAbTest[0-9]*=([^;]+)","g"));if(t)for(let o=0;o<t.length;o++){const n=t[o].split("="),r=parseInt(n[0].replace("omAbTest",""),10),i=n[1];e[r]=i}return e},Oe=function(){const e=navigator.cookieEnabled;let t=!!e;return void 0!==e||t||(document.cookie="isCookie",t=-1!=document.cookie.indexOf("isCookie")),t},Re=function(){return!!document.webkitVisibilityState&&"prerender"===document.webkitVisibilityState},Me=function(){return Oe()&&!1===Re()},be=function(e){const t=document.createElement("script"),o=document.createTextNode(e);t.appendChild(o),t.type="text/javascript";const n=document.querySelector('script[src*="front.optimonk.com"][src$="preload.js"]');n&&n.nonce&&t.setAttribute("nonce",n.nonce),document.getElementsByTagName("head")[0].appendChild(t)},Ce=function(e,t,o){let n;document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):document.createEventObject&&(n=document.createEventObject(),n.eventType=t),n.eventName=t,n.parameters=o||{},e.dispatchEvent?e.dispatchEvent(n):e.fireEvent?e.fireEvent(`on${n.eventType}`,n):e[t]?e[t]():e[`on${t}`]&&e[`on${t}`]()},Ae=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`},Ee=function(e,t){return t.split(".").reduce((function(e,t){return(e||{})[t]}),e)},$e=function(e,t,o){if(t){const n=document.createElement("script");!1!==o&&(n.onload=function(){const t=new Event(`${e}Loaded`);document.dispatchEvent(t)}),n.src=t,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}else console.log("no src for script",e)},xe=function(){let e=`url=${encodeURIComponent(window.location.href)}&cookie=${d(Se())}`;OptiMonkRegistry.clientId&&(e=`${e}&clientId=${encodeURIComponent(OptiMonkRegistry.clientId)}`),e=`${e}&abTestCookies=${d(ke())}`;let o=`${OptiMonkRegistry.baseUrl}/public/${OptiMonkRegistry.account}/js/load`;t.isSPA&&(o+=`?t=${(new Date).getTime()}`),Z.initialize(),Z.getInfo();const n=void 0!==window.screen?{width:window.screen.width,height:window.screen.height}:{width:window.innerWidth,height:window.innerHeight};Math.min(n.width,n.height)<=576?setTimeout((function(){r.post(e,o,be)}),3e3):r.post(e,o,be)},Te=function(){if(window.ShopifyAnalytics){const e=document.querySelector('form[action^="/cart/add"][data-delm-is-primary-form="true"]')?document.querySelector('form[action^="/cart/add"][data-delm-is-primary-form="true"]'):document.querySelector('form[action^="/cart/add"]');if(e){const t=e.querySelector('[name="id"]');if(t)return t.value}if("undefined"!=typeof URLSearchParams){const e=new URLSearchParams(window.location.search).get("variant");if(e)return e}return Ee(window.ShopifyAnalytics,"meta.selectedVariantId")||null}return window.ShopRenter&&Ee(window.ShopRenter,"product.id")||null},je=function(){let e=null,t=Te();if(window.ShopifyAnalytics){e=Ee(window.ShopifyAnalytics,"meta.product.id");const o=Ee(window.ShopifyAnalytics,"meta.product.variants");if(o){o.find((function(e){return`${e.id}`==`${t}`}))||(t=null)}}else window.ShopRenter&&(t=Ee(window.ShopRenter,"product.id"),e=Ee(window.ShopRenter,"product.parent.id")||t);return e&&t?{productId:`${e}`,variantId:`${t}`}:null};var _e=Object.freeze({__proto__:null,each:function(e,t){let o;for(o in e)e.hasOwnProperty(o)&&"length"!==o&&t(o,e[o])},getCookie:Se,getAbTestCookies:ke,saveCookie:function(){function e(e){return de.compressToBase64(JSON.stringify(e))}const t=Se();t[OptiMonkRegistry.account]=OptiMonkRegistry.Cookie;const o=t[OptiMonkRegistry.account].ca;if(Object.keys(o).length>14){const n=[];let r=[],i=1;for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];t.caId=e,r.push(t),i%14==0&&(n.push(r),r=[]),i++}n.push(r),n.forEach((function(t,o){o&&M.local.setItem(`optiMonkClient_${OptiMonkRegistry.account}_${o}`,e(t))}));const s=JSON.parse(JSON.stringify(t));s[OptiMonkRegistry.account].ca=n[0],M.local.setItem("optiMonkClient",e(s))}else M.local.setItem("optiMonkClient",e(t));const n=M.local.getItemSlicesRaw("optiMonkClient");for(let e=0,t=n.length;e<t;e+=1){const t=n[e];-1===t.value.indexOf("{")||M.local.removeItem(t.key)}},isCookieEnabled:Oe,isPreRender:Re,shouldContinueLoading:Me,addResponseToHead:be,triggerEvent:Ce,uuid:Ae,requestIdleCallback:function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);const o=Date.now(),n=t&&"number"==typeof t.timeout?t.timeout:50;return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,n-(Date.now()-o))})}),1)},cancelIdleCallback:function(e){if(window.cancelIdleCallback)return window.cancelIdleCallback(e);clearTimeout(e)},_get:Ee,addScript:$e,sendLoadRequest:xe,sendMetrics:function(e,t){t.frontend=!0,t.device=OptiMonkRegistry.isMobile?"mobile":"desktop",pe.fetch(`${OptiMonkRegistry.baseUrl}/metrics`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({account:OptiMonkRegistry.account,event:`frontend-${e}`,properties:t})})},getSelectedVariantId:Te,getViewedProductIds:je});const Le=(e,t)=>{if(!t||!e)throw new Error("Both viewId and userId must be specified!");return{query:{type:"qgql",gql:"\nquery($viewId: String!, $userId: String!) {\n  userView(viewId: $viewId, userId: $userId) {\n    n, ts\n  }\n}\n",values:{viewId:e,userId:t}}}},Pe=function(e,t){return void 0===t&&(t={variable:"startTimestamp"}),{query:{type:"qci",eventQuery:{eventType:"pageView",startTimestamp:t,expression:["re",e,{variable:"path"}],aggregation:"count"}}}},De=function(e,t){let{operator:o=">",viewId:n=null,userId:r=M.local.getItem("_shopify_y")}=void 0===t?{}:t;return n?{bindings:{apiResponse:Le(n,r)},body:{bindings:{startTimestamp:["path","$.userView.ts",{variable:"apiResponse"},0],apiAggregate:["path","$.userView.n",{variable:"apiResponse"},0]},body:[o,["+",{variable:"apiAggregate"},Pe(e)],0]}}:[o,Pe(e),0]};async function qe(){try{const e=(()=>{if(100221===OptiMonkRegistry.account)return[["and",["or",De("collections/divan-beds/?$",{viewId:"43"}),De("collections/divan-bases/?$",{viewId:"44"}),De("/search$",{viewId:"45"})],De("/thank_you",{viewId:"46",operator:"="})]];return[]})(),t=window.JFClientSDK;if(e.length>0){const o=[],n=e.map(((e,n)=>t.v2.evaluateConditionalExpression({expression:e},(e=>{o[n]=e}))));t.v2.go();(await Promise.all(n)).forEach(((n,r)=>{t.v2.log({message:`Hidden page view targeting rules evaluated: ${String(n)}`,messageType:"pageViewTargetingResult",data:{expression:e[r],trace:o[r],result:n}})})),t.v2.go()}}catch(e){console.error(e)}}function Fe(e){const t=je();return t&&(window.JFClientSDK.v2.registerProductView(t),e)?window.JFClientSDK.v2.go().catch((function(e){console.log("An error occurred during JFClientSDK.v2.go():",e.message),console.log(e)})):null}const Ue=()=>{const e="x-om-web-selector-token",t=new URLSearchParams(location.search).get(e),o=localStorage.getItem(e),n=OptiMonkRegistry.pncJsScriptUrl&&(t||o);n&&$e("webSelector",`${OptiMonkRegistry.pncJsScriptUrl}?t=${(new Date).getTime()}`);let r=!1,i="";const s=OptiMonkRegistry.experiment,c="om-experiment-cohorts";let a=[];try{const e=Ee(Se(),`${OptiMonkRegistry.account}.fv`);if(s&&(!e||e>=1610549143)){const e=M.local.getItem(c),t=`${s.name}-${s.version}-splitA`,o=`${s.name}-${s.version}-splitB`;e&&(a=JSON.parse(e)),-1!==a.indexOf(t)?r=!0:-1===a.indexOf(o)&&(Math.floor(100*Math.random())+1<=s.splitA?(i=t,a.push(t),r=!0):(i=o,a.push(o))),M.local.setItem(c,JSON.stringify(a)),OptiMonkRegistry.cohorts=a.join(",")}}catch(e){console.log("Failed to initialize experiments:",e.message),console.log(e)}document.addEventListener("jetfabricLoaded",(function e(){try{if(document.removeEventListener("jetfabricLoaded",e),!OptiMonkRegistry.account||!window.JFClientSDK)return;let t;const o=Z.getInfo();let n=o.type,r=o.shopId||window.location.host;if(window.ShopifyAnalytics?t=Ee(window.ShopifyAnalytics,"meta.page.customerId"):window.ShopRenter&&(t=Ee(window.ShopRenter,"customer.userId")),58417===OptiMonkRegistry.account?(r="blendjet.myshopify.com",n="shopify"):88202===OptiMonkRegistry.account&&(r="rugby-is-life.myshopify.com",n="shopify"),t=t?`${t}`:void 0,window.JFClientSDK.v2.setAppId("optimonk").setFeatureState("INDEXEDDB_EVENTS",OptiMonkRegistry.jfIDBStoreEnabled).registerCustomerAddress({provider:"optimonk",providerServiceId:`${OptiMonkRegistry.account}`,customerAddress:OptiMonkRegistry.clientId,addressType:"deviceId"}).registerCustomerAddress({provider:n,providerServiceId:r,customerAddress:t||null,addressType:"customerId"}),"shopify"===n){const e=M.local.getItem("_shopify_y");e&&window.JFClientSDK.v2.registerCustomerAddress({provider:"shopify",providerServiceId:r,customerAddress:e,addressType:"deviceId"})}i&&window.JFClientSDK.v2.registerCustomEvent("cohortAssign",{cohort:i}),Fe(),function(){try{window.JFClientSDK.v2.registerCustomEvent("pageView",{title:document.title,referrer:document.referrer,userAgent:navigator.userAgent,url:window.location.href,host:window.location.host,path:window.location.pathname,query:window.location.search,hash:window.location.hash,viewportWidth:document.documentElement.clientWidth,viewportHeight:document.documentElement.clientHeight})}catch(e){console.log("unable to log page view:",e.message)}}(),qe();window.Shopify&&window.Shopify.Checkout&&"thank_you"===window.Shopify.Checkout.page&&window.Shopify.checkout&&window.JFClientSDK.v2.registerCustomEvent("eoo",{orderId:window.Shopify.checkout.order_id.toString(),total:parseFloat(window.Shopify.checkout.total_price),currency:window.Shopify.checkout.currency,platform:"shopify",deviceType:OptiMonkRegistry.isMobile?"mobile":"desktop",cohorts:OptiMonkRegistry.cohorts});window.ShopRenter&&window.ShopRenter.page&&"checkout/success"===window.ShopRenter.page.route&&window.ShopRenter.lastOrder&&window.JFClientSDK.v2.registerCustomEvent("eoo",{orderId:window.ShopRenter.lastOrder.id,total:window.ShopRenter.lastOrder.total,currency:window.ShopRenter.lastOrder.currency,platform:"shoprenter",deviceType:OptiMonkRegistry.isMobile?"mobile":"desktop",cohorts:OptiMonkRegistry.cohorts}),window.JFClientSDK.v2.go().catch((function(e){console.log("An error occurred during JFClientSDK.v2.go():",e.message),console.log(e)})),function(e){if(!(e=e||je()))return;const t={productId:e.productId,variantId:e.variantId};window.ShopifyAnalytics&&setInterval((function(){const e=je();e&&e.variantId&&t.variantId!==e.variantId&&(t.productId=e.productId,t.variantId=e.variantId,console.log("Detected Shopify variant change."),Fe(!0))}),1e3)}()}catch(e){console.error("Failed to initialize JF:",e.message),console.error(e)}})),$e("jetfabric",OptiMonkRegistry.jfJsScriptUrl),D.load().then((function(){n||r||!Me()||xe()}))},Je={isShopifyShop:()=>void 0!==window.ShopifyAnalytics&&void 0!==window.Shopify,isProductPage:()=>"product"===window.ShopifyAnalytics.meta.page.pageType,getProductId:()=>window.ShopifyAnalytics.meta.product.id,getVariantId:()=>window.ShopifyAnalytics.meta.selectedVariantId,getProductPageData(){return{product_id:this.getProductId()}},getShopName:()=>window.Shopify.shop||window.Shopify.Checkout.apiHost,getShopCurrency:()=>window.ShopifyAnalytics.meta.currency};v(t,e({Logger:n,ErrorReporter:u,Cookie:M,Storage:P,Data:D,Engine:Z,SiteInfo:te,messaging:se,Util:ce,ajax:r,LZString:de,native:pe},ge,Ie,_e)),void 0===window.OptiMonk&&(window.OptiMonk=t),(()=>{t.preloadInitialized=!0,t.hasError=!1;try{t.Util.checkVariable("ShopifyAnalytics",20).then((function(){t.ShopifyAdapter=Je,t.triggerEvent(document.querySelector("html"),"optimonk#shopify-vars-loaded",t.ShopifyAdapter)}),(function(){t.triggerEvent(document.querySelector("html"),"optimonk#shopify-vars-not-loaded")})),Ce(document.querySelector("html"),"optimonk#preload-initialized"),OptiMonkRegistry.needClientId&&function(){let e=M.local.getItem("optiMonkClientId");e||(e=Ae(),M.local.setItem("optiMonkClientId",e)),OptiMonkRegistry.clientId=e}(),OptiMonkRegistry.needSiteInfo&&setTimeout((function(){te.initialize(),te.send()}),5e3),Ue(),30818!==OptiMonkRegistry.account&&58417!==OptiMonkRegistry.account||ye(window,"error",u.sendEventError),58417===OptiMonkRegistry.account&&setInterval((function(){if(!t.Visitor)return;const e=t.Visitor.createAdapter();e.Cart.clear();(Ee(window.$nuxt,"$store.state.cart.lineItems")||[]).forEach((function(t){const o=t.variant;e.Cart.add(t.id,{handle:t.handle,quantity:t.quantity,price:parseFloat(o.price),line_price:parseFloat(o.compareAtPrice),product_id:t.id,product_title:t.title,sku:o.sku,title:t.title,url:t.url})}))}),200)}catch(e){u.sendException(e),n.error(e),u.sendException("preload",e)}})()}();
}
